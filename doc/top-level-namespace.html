<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Top Level Namespace
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/custom.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo;
    
    
    <span class="title">Top Level Namespace</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Top Level Namespace
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Funktioner.html" title="Funktioner (module)">Funktioner</a></span></dd>
  </dl>
  
  

  

  
</div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Funktioner.html" title="Funktioner (module)">Funktioner</a></span>
    
  
    
  
</p>







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__-instance_method" title="#GET / (instance method)">#<strong>GET /</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Förstasidan, här ansätts användarnamnet som visas högst upp på sidan.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__annonser_-instance_method" title="#GET /annonser/ (instance method)">#<strong>GET /annonser/</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>visar alla annonser som finns sparade i databasen,.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__annonser__id-instance_method" title="#GET /annonser/:id (instance method)">#<strong>GET /annonser/:id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Här pressenteras all data om en annons, (efter att man har klickat på den) Pris, annonstext, bild, etc.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__annonser__id_edit-instance_method" title="#GET /annonser/:id/edit (instance method)">#<strong>GET /annonser/:id/edit</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>visar ett ifyllt formulär i vilken användaren kan redigera en annons.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__annonser_new-instance_method" title="#GET /annonser/new (instance method)">#<strong>GET /annonser/new</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Visar ettt formulär där användaren kan skapa en ny annons, välja/skriva in uppgifter om varan.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__anvandare__id_edit_-instance_method" title="#GET /anvandare/:id/edit/ (instance method)">#<strong>GET /anvandare/:id/edit/</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Ett ifyllt formulär där användaren kan redigera sina användar uppgifter (namn, mailadress, och lösenord.).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__anvandare_login_-instance_method" title="#GET /anvandare/login/ (instance method)">#<strong>GET /anvandare/login/</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>visar ett litet formulär där anvädaren kan logga in.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__anvandare_logout_-instance_method" title="#GET /anvandare/logout/ (instance method)">#<strong>GET /anvandare/logout/</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>här kan man logga ut.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__anvandare_new_-instance_method" title="#GET /anvandare/new/ (instance method)">#<strong>GET /anvandare/new/</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>visar ett formulär där en ny användare kan registrera sitt konto.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__mina_annonser_-instance_method" title="#GET /mina_annonser/ (instance method)">#<strong>GET /mina_annonser/</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>visar annonse skapade av den inloggade användaren (eller admin).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__sparade_-instance_method" title="#GET /sparade/ (instance method)">#<strong>GET /sparade/</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>visar en lista med en användares alla sparade favoriannonser.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__annonser-instance_method" title="#POST /annonser (instance method)">#<strong>POST /annonser</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sparar en ny annons i databasen.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__annonser__id_delete-instance_method" title="#POST /annonser/:id/delete (instance method)">#<strong>POST /annonser/:id/delete</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Tar bort en specifik annons från databasen  Tar även bort den reöaterade bilden om sådan finns.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__annonser__id_rm_fav-instance_method" title="#POST /annonser/:id/rm_fav (instance method)">#<strong>POST /annonser/:id/rm_fav</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>tar bort en favoritannons ifrån relationstabellen.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__annonser__id_spara-instance_method" title="#POST /annonser/:id/spara (instance method)">#<strong>POST /annonser/:id/spara</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>sparar en favoritannons i relationstabellen.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__annonser__id_update-instance_method" title="#POST /annonser/:id/update (instance method)">#<strong>POST /annonser/:id/update</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Updaterar (ändrar) annonsdatan för en annons.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__anvandare-instance_method" title="#POST /anvandare (instance method)">#<strong>POST /anvandare</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sparar en ny användare i databasen  Kontrollerar om det valda användarnamnet är upptaget, om så är fallet skickas ett felmeddelande.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__anvandare__id_delete-instance_method" title="#POST /anvandare/:id/delete (instance method)">#<strong>POST /anvandare/:id/delete</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>tar bort en användare ifrån databasen tar även bort sesson med sesion.destroy.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__anvandare__id_update-instance_method" title="#POST /anvandare/:id/update (instance method)">#<strong>POST /anvandare/:id/update</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>redigerar användarens upgifter.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__anvandare_login-instance_method" title="#POST /anvandare/login (instance method)">#<strong>POST /anvandare/login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Kontrollerar om inloggningsuppgifterna stämmer med de sparade uppgifterna i databasen.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Funktioner.html" title="Funktioner (module)">Funktioner</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Funktioner.html#admin_or_not-instance_method" title="Funktioner#admin_or_not (method)">#admin_or_not</a></span>, <span class='object_link'><a href="Funktioner.html#all_of-instance_method" title="Funktioner#all_of (method)">#all_of</a></span>, <span class='object_link'><a href="Funktioner.html#all_of2-instance_method" title="Funktioner#all_of2 (method)">#all_of2</a></span>, <span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">#anropa_db</a></span>, <span class='object_link'><a href="Funktioner.html#anv_delete-instance_method" title="Funktioner#anv_delete (method)">#anv_delete</a></span>, <span class='object_link'><a href="Funktioner.html#check_auth_user_or_admin-instance_method" title="Funktioner#check_auth_user_or_admin (method)">#check_auth_user_or_admin</a></span>, <span class='object_link'><a href="Funktioner.html#check_psw-instance_method" title="Funktioner#check_psw (method)">#check_psw</a></span>, <span class='object_link'><a href="Funktioner.html#check_usr_auth-instance_method" title="Funktioner#check_usr_auth (method)">#check_usr_auth</a></span>, <span class='object_link'><a href="Funktioner.html#cooldown-instance_method" title="Funktioner#cooldown (method)">#cooldown</a></span>, <span class='object_link'><a href="Funktioner.html#cooldown_note-instance_method" title="Funktioner#cooldown_note (method)">#cooldown_note</a></span>, <span class='object_link'><a href="Funktioner.html#create_new_crypt_password-instance_method" title="Funktioner#create_new_crypt_password (method)">#create_new_crypt_password</a></span>, <span class='object_link'><a href="Funktioner.html#delete_image-instance_method" title="Funktioner#delete_image (method)">#delete_image</a></span>, <span class='object_link'><a href="Funktioner.html#edit_usr_form_data-instance_method" title="Funktioner#edit_usr_form_data (method)">#edit_usr_form_data</a></span>, <span class='object_link'><a href="Funktioner.html#ej_inlogg_note-instance_method" title="Funktioner#ej_inlogg_note (method)">#ej_inlogg_note</a></span>, <span class='object_link'><a href="Funktioner.html#hackerman-instance_method" title="Funktioner#hackerman (method)">#hackerman</a></span>, <span class='object_link'><a href="Funktioner.html#inloggad_anv_namn-instance_method" title="Funktioner#inloggad_anv_namn (method)">#inloggad_anv_namn</a></span>, <span class='object_link'><a href="Funktioner.html#no_of_likes-instance_method" title="Funktioner#no_of_likes (method)">#no_of_likes</a></span>, <span class='object_link'><a href="Funktioner.html#psw_check-instance_method" title="Funktioner#psw_check (method)">#psw_check</a></span>, <span class='object_link'><a href="Funktioner.html#rm_fav-instance_method" title="Funktioner#rm_fav (method)">#rm_fav</a></span>, <span class='object_link'><a href="Funktioner.html#saved_by_user_or_not-instance_method" title="Funktioner#saved_by_user_or_not (method)">#saved_by_user_or_not</a></span>, <span class='object_link'><a href="Funktioner.html#saveto_relation-instance_method" title="Funktioner#saveto_relation (method)">#saveto_relation</a></span>, <span class='object_link'><a href="Funktioner.html#savetodb_annonser-instance_method" title="Funktioner#savetodb_annonser (method)">#savetodb_annonser</a></span>, <span class='object_link'><a href="Funktioner.html#savetodb_anvandare-instance_method" title="Funktioner#savetodb_anvandare (method)">#savetodb_anvandare</a></span>, <span class='object_link'><a href="Funktioner.html#select_all_annons-instance_method" title="Funktioner#select_all_annons (method)">#select_all_annons</a></span>, <span class='object_link'><a href="Funktioner.html#select_annons_data-instance_method" title="Funktioner#select_annons_data (method)">#select_annons_data</a></span>, <span class='object_link'><a href="Funktioner.html#select_annonser-instance_method" title="Funktioner#select_annonser (method)">#select_annonser</a></span>, <span class='object_link'><a href="Funktioner.html#select_kattegorier-instance_method" title="Funktioner#select_kattegorier (method)">#select_kattegorier</a></span>, <span class='object_link'><a href="Funktioner.html#select_kontakt_upg-instance_method" title="Funktioner#select_kontakt_upg (method)">#select_kontakt_upg</a></span>, <span class='object_link'><a href="Funktioner.html#select_owner_annonser-instance_method" title="Funktioner#select_owner_annonser (method)">#select_owner_annonser</a></span>, <span class='object_link'><a href="Funktioner.html#select_psw-instance_method" title="Funktioner#select_psw (method)">#select_psw</a></span>, <span class='object_link'><a href="Funktioner.html#select_saved-instance_method" title="Funktioner#select_saved (method)">#select_saved</a></span>, <span class='object_link'><a href="Funktioner.html#select_user_login-instance_method" title="Funktioner#select_user_login (method)">#select_user_login</a></span>, <span class='object_link'><a href="Funktioner.html#select_user_saved_relation-instance_method" title="Funktioner#select_user_saved_relation (method)">#select_user_saved_relation</a></span>, <span class='object_link'><a href="Funktioner.html#ta_veck_annons-instance_method" title="Funktioner#ta_veck_annons (method)">#ta_veck_annons</a></span>, <span class='object_link'><a href="Funktioner.html#update_annonser-instance_method" title="Funktioner#update_annonser (method)">#update_annonser</a></span>, <span class='object_link'><a href="Funktioner.html#update_user_data-instance_method" title="Funktioner#update_user_data (method)">#update_user_data</a></span>, <span class='object_link'><a href="Funktioner.html#update_user_psw-instance_method" title="Funktioner#update_user_psw (method)">#update_user_psw</a></span>, <span class='object_link'><a href="Funktioner.html#utloggad-instance_method" title="Funktioner#utloggad (method)">#utloggad</a></span>, <span class='object_link'><a href="Funktioner.html#validate_email_note-instance_method" title="Funktioner#validate_email_note (method)">#validate_email_note</a></span>, <span class='object_link'><a href="Funktioner.html#validate_email_password-instance_method" title="Funktioner#validate_email_password (method)">#validate_email_password</a></span>, <span class='object_link'><a href="Funktioner.html#validate_password_note-instance_method" title="Funktioner#validate_password_note (method)">#validate_password_note</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="GET__-instance_method">
  
    #<strong>GET /</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Förstasidan, här ansätts användarnamnet som visas högst upp på sidan</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#inloggad_anv_namn-instance_method" title="Funktioner#inloggad_anv_namn (method)">Funktioner#inloggad_anv_namn</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59
60
61
62
63
64
65</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 59</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='ivar'>@anv_namn</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:anv_id</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='kw'>nil</span>
        <span class='ivar'>@anv_namn</span> <span class='op'>=</span> <span class='id identifier rubyid_inloggad_anv_namn'><span class='object_link'><a href="Funktioner.html#inloggad_anv_namn-instance_method" title="Funktioner#inloggad_anv_namn (method)">inloggad_anv_namn</a></span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:main</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__annonser_-instance_method">
  
    #<strong>GET /annonser/</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>visar alla annonser som finns sparade i databasen,</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>Funktioner#select_annons_data()</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72
73
74
75
76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 70</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/annonser/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#db = SQLite3::Database.new(&quot;db/AD_DATA.db&quot;)
</span>    <span class='comment'>#db.results_as_hash = true
</span>    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_select_annons_data'><span class='object_link'><a href="Funktioner.html#select_annons_data-instance_method" title="Funktioner#select_annons_data (method)">select_annons_data</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;annonser/index&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>result:</span><span class='id identifier rubyid_result'>result</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__annonser__id-instance_method">
  
    #<strong>GET /annonser/:id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Här pressenteras all data om en annons, (efter att man har klickat på den) Pris, annonstext, bild, etc. dessutom visas en knapp om användaren vill spara annosnen samt ett räkneverk som visar hur många andra har sparat annonsen.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#select_all_annons-instance_method" title="Funktioner#select_all_annons (method)">Funktioner#select_all_annons</a></span></li>
    
      <li><span class='object_link'><a href="Funktioner.html#select_saved-instance_method" title="Funktioner#select_saved (method)">Funktioner#select_saved</a></span></li>
    
      <li><span class='object_link'><a href="Funktioner.html#no_of_likes-instance_method" title="Funktioner#no_of_likes (method)">Funktioner#no_of_likes</a></span></li>
    
      <li><span class='object_link'><a href="Funktioner.html#select_kontakt_upg-instance_method" title="Funktioner#select_kontakt_upg (method)">Funktioner#select_kontakt_upg</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99
100
101
102
103
104
105
106
107
108
109
110</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 97</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/annonser/:id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_select_all_annons'><span class='object_link'><a href="Funktioner.html#select_all_annons-instance_method" title="Funktioner#select_all_annons (method)">select_all_annons</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:anv_id</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='kw'>nil</span>
        <span class='ivar'>@anv_sparade</span> <span class='op'>=</span> <span class='id identifier rubyid_select_saved'><span class='object_link'><a href="Funktioner.html#select_saved-instance_method" title="Funktioner#select_saved (method)">select_saved</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='ivar'>@antal_lajks</span> <span class='op'>=</span> <span class='id identifier rubyid_no_of_likes'><span class='object_link'><a href="Funktioner.html#no_of_likes-instance_method" title="Funktioner#no_of_likes (method)">no_of_likes</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>

    <span class='ivar'>@kontakt</span> <span class='op'>=</span> <span class='id identifier rubyid_select_kontakt_upg'><span class='object_link'><a href="Funktioner.html#select_kontakt_upg-instance_method" title="Funktioner#select_kontakt_upg (method)">select_kontakt_upg</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;annonser/show&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>result:</span><span class='id identifier rubyid_result'>result</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__annonser__id_edit-instance_method">
  
    #<strong>GET /annonser/:id/edit</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>visar ett ifyllt formulär i vilken användaren kan redigera en annons.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id,</span>
      
      
        <span class='type'>(<tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>identifikationsnummret på den annons som ska ändras.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#select_all_annons-instance_method" title="Funktioner#select_all_annons (method)">Funktioner#select_all_annons</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


197
198
199
200
201
202
203
204
205
206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 197</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/annonser/:id/edit</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_select_all_annons'><span class='object_link'><a href="Funktioner.html#select_all_annons-instance_method" title="Funktioner#select_all_annons (method)">select_all_annons</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>

    <span class='comment'>#p db.execute(&quot;SELECT DISTINCT user_owner_id FROM Annonser WHERE id = ?&quot;, id).first[&quot;user_owner_id&quot;]
</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;annonser/edit&quot;</span><span class='comma'>,</span><span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>result:</span><span class='id identifier rubyid_result'>result</span><span class='rbrace'>}</span><span class='rparen'>)</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__annonser_new-instance_method">
  
    #<strong>GET /annonser/new</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Visar ettt formulär där användaren kan skapa en ny annons, välja/skriva in uppgifter om varan.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#select_kattegorier-instance_method" title="Funktioner#select_kattegorier (method)">Funktioner#select_kattegorier</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84
85
86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 82</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/annonser/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    
    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_select_kattegorier'><span class='object_link'><a href="Funktioner.html#select_kattegorier-instance_method" title="Funktioner#select_kattegorier (method)">select_kattegorier</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;annonser/new&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>result:</span><span class='id identifier rubyid_result'>result</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__anvandare__id_edit_-instance_method">
  
    #<strong>GET /anvandare/:id/edit/</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Ett ifyllt formulär där användaren kan redigera sina användar uppgifter (namn, mailadress, och lösenord.)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id,</span>
      
      
        <span class='type'>(<tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id nummer på det användarkonto som ska redigeras</p>
</div>
      
    </li>
  
</ul>




</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


462
463
464
465
466
467</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 462</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/anvandare/:id/edit/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span>
    <span class='ivar'>@delete_id</span> <span class='op'>=</span> <span class='id identifier rubyid_id'>id</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;anvandare/edit&quot;</span><span class='comma'>,</span><span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>result:</span><span class='id identifier rubyid_edit_usr_form_data'><span class='object_link'><a href="Funktioner.html#edit_usr_form_data-instance_method" title="Funktioner#edit_usr_form_data (method)">edit_usr_form_data</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__anvandare_login_-instance_method">
  
    #<strong>GET /anvandare/login/</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>visar ett litet formulär där anvädaren kan logga in. här kan användaren skriva sinn anv-namn och lösenord.</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


453
454
455</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 453</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/anvandare/login/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;anvandare/login&quot;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__anvandare_logout_-instance_method">
  
    #<strong>GET /anvandare/logout/</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>här kan man logga ut.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#utloggad-instance_method" title="Funktioner#utloggad (method)">Funktioner#utloggad</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


472
473
474
475</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 472</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/anvandare/logout/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_utloggad'><span class='object_link'><a href="Funktioner.html#utloggad-instance_method" title="Funktioner#utloggad (method)">utloggad</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/anvandare/login/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__anvandare_new_-instance_method">
  
    #<strong>GET /anvandare/new/</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>visar ett formulär där en ny användare kan registrera sitt konto.</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


359
360
361</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 359</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/anvandare/new/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;anvandare/register&quot;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__mina_annonser_-instance_method">
  
    #<strong>GET /mina_annonser/</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>visar annonse skapade av den inloggade användaren (eller admin)</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#admin_or_not-instance_method" title="Funktioner#admin_or_not (method)">Funktioner#admin_or_not</a></span></li>
    
      <li><span class='object_link'><a href="Funktioner.html#select_annonser-instance_method" title="Funktioner#select_annonser (method)">Funktioner#select_annonser</a></span></li>
    
      <li><span class='object_link'><a href="Funktioner.html#select_owner_annonser-instance_method" title="Funktioner#select_owner_annonser (method)">Funktioner#select_owner_annonser</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 117</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/mina_annonser/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
   
    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_admin_or_not'><span class='object_link'><a href="Funktioner.html#admin_or_not-instance_method" title="Funktioner#admin_or_not (method)">admin_or_not</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_select_annonser'><span class='object_link'><a href="Funktioner.html#select_annonser-instance_method" title="Funktioner#select_annonser (method)">select_annonser</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>


    <span class='kw'>else</span> 
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_select_owner_annonser'><span class='object_link'><a href="Funktioner.html#select_owner_annonser-instance_method" title="Funktioner#select_owner_annonser (method)">select_owner_annonser</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='kw'>end</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;hantera_annonser/index&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>result:</span><span class='id identifier rubyid_result'>result</span><span class='rbrace'>}</span><span class='rparen'>)</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__sparade_-instance_method">
  
    #<strong>GET /sparade/</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>visar en lista med en användares alla sparade favoriannonser.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>anv_id,</span>
      
      
        <span class='type'>(<tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id’t på den användaren vars favoritannonser ska tas fram.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#select_user_saved_relation-instance_method" title="Funktioner#select_user_saved_relation (method)">Funktioner#select_user_saved_relation</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


440
441
442
443
444
445
446
447
448</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 440</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/sparade/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>

    <span class='id identifier rubyid_anv_id'>anv_id</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:anv_id</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_select_user_saved_relation'><span class='object_link'><a href="Funktioner.html#select_user_saved_relation-instance_method" title="Funktioner#select_user_saved_relation (method)">select_user_saved_relation</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;sparade/index&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>result:</span><span class='id identifier rubyid_result'>result</span><span class='rbrace'>}</span><span class='rparen'>)</span>
                    
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__annonser-instance_method">
  
    #<strong>POST /annonser</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sparar en ny annons i databasen</p>

<p>denna route sparat även en bild i /public/user_bilder om användaren har laddat upp en sådan.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>rubrik,</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Rubriken på annonsen</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pris,</span>
      
      
        <span class='type'>(<tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>prist på varan som säljs</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>annonstext,</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>beskrivande text under annonsen</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kattegori,</span>
      
      
        <span class='type'>(<tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Nummret (id) på den kattegori som varan tillhör.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>user_id,</span>
      
      
        <span class='type'>(<tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id’t på användaren som äger annonsen.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#savetodb_annonser-instance_method" title="Funktioner#savetodb_annonser (method)">Funktioner#savetodb_annonser</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 143</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/annonser</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_rubrik'>rubrik</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:titel</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_pris'>pris</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:pris</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_annonstext'>annonstext</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:text</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_kattegori'>kattegori</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:kattegori</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span>  <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:anv_id</span><span class='rbracket'>]</span>

    <span class='comment'>#p user_id
</span>    
    <span class='kw'>if</span>  <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:bilden</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_bild_filnamn'>bild_filnamn</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:bilden</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:filename</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_bild_fil'>bild_fil</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:bilden</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:tempfile</span><span class='rbracket'>]</span>
        
        <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./public/user_bilder/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bild_filnamn'>bild_filnamn</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wb</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
            <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_bild_fil'>bild_fil</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

       
    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_savetodb_annonser'><span class='object_link'><a href="Funktioner.html#savetodb_annonser-instance_method" title="Funktioner#savetodb_annonser (method)">savetodb_annonser</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_rubrik'>rubrik</span><span class='comma'>,</span> <span class='id identifier rubyid_pris'>pris</span><span class='comma'>,</span> <span class='id identifier rubyid_annonstext'>annonstext</span><span class='comma'>,</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='comma'>,</span> <span class='id identifier rubyid_kattegori'>kattegori</span><span class='comma'>,</span> <span class='id identifier rubyid_bild_filnamn'>bild_filnamn</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/annonser/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>


<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__annonser__id_delete-instance_method">
  
    #<strong>POST /annonser/:id/delete</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Tar bort en specifik annons från databasen  Tar även bort den reöaterade bilden om sådan finns</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id,</span>
      
      
        <span class='type'>(<tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>identifikationsnummret på den annons som ska tas bort.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#delete_image-instance_method" title="Funktioner#delete_image (method)">Funktioner#delete_image</a></span></li>
    
      <li><span class='object_link'><a href="Funktioner.html#ta_veck_annons-instance_method" title="Funktioner#ta_veck_annons (method)">Funktioner#ta_veck_annons</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


178
179
180
181
182
183
184
185
186
187
188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 178</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/annonser/:id/delete</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>    
    <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='comment'>#p @db.execute(&quot;SELECT DISTINCT user_owner_id FROM Annonser WHERE id = ?&quot;, id).first
</span>    <span class='comment'>#p @db.execute(&quot;SELECT DISTINCT bild FROM Annonser WHERE id = ?&quot;, id)
</span>

    <span class='id identifier rubyid_delete_image'><span class='object_link'><a href="Funktioner.html#delete_image-instance_method" title="Funktioner#delete_image (method)">delete_image</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_ta_veck_annons'><span class='object_link'><a href="Funktioner.html#ta_veck_annons-instance_method" title="Funktioner#ta_veck_annons (method)">ta_veck_annons</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
 
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/mina_annonser/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__annonser__id_rm_fav-instance_method">
  
    #<strong>POST /annonser/:id/rm_fav</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>tar bort en favoritannons ifrån relationstabellen.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>annons_id,</span>
      
      
        <span class='type'>(<tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id för annonsen som ska sparas</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#rm_fav-instance_method" title="Funktioner#rm_fav (method)">Funktioner#rm_fav</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


344
345
346
347
348
349
350
351
352
353
354
355
356</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 344</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/annonser/:id/rm_fav</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_annons_id'>annons_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_anv_id'>anv_id</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:anv_id</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_anv_id'>anv_id</span> <span class='op'>!=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_rm_fav'><span class='object_link'><a href="Funktioner.html#rm_fav-instance_method" title="Funktioner#rm_fav (method)">rm_fav</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_annons_id'>annons_id</span><span class='comma'>,</span> <span class='id identifier rubyid_anv_id'>anv_id</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_hackerman'><span class='object_link'><a href="Funktioner.html#hackerman-instance_method" title="Funktioner#hackerman (method)">hackerman</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='id identifier rubyid_back'>back</span>

    <span class='kw'>end</span>
    <span class='id identifier rubyid_redirect'>redirect</span> <span class='id identifier rubyid_back'>back</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__annonser__id_spara-instance_method">
  
    #<strong>POST /annonser/:id/spara</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>sparar en favoritannons i relationstabellen.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>annons_id,</span>
      
      
        <span class='type'>(<tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id för annonsen som ska sparas</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#saveto_relation-instance_method" title="Funktioner#saveto_relation (method)">Funktioner#saveto_relation</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


327
328
329
330
331
332
333
334
335
336
337
338</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 327</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/annonser/:id/spara</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>

    <span class='id identifier rubyid_annons_id'>annons_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_anv_id'>anv_id</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:anv_id</span><span class='rbracket'>]</span>
    <span class='comment'>#p anv_id
</span>    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_saveto_relation'><span class='object_link'><a href="Funktioner.html#saveto_relation-instance_method" title="Funktioner#saveto_relation (method)">saveto_relation</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_anv_id'>anv_id</span><span class='comma'>,</span> <span class='id identifier rubyid_annons_id'>annons_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/annonser/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_annons_id'>annons_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_redirect'>redirect</span> <span class='id identifier rubyid_back'>back</span>


<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__annonser__id_update-instance_method">
  
    #<strong>POST /annonser/:id/update</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Updaterar (ändrar) annonsdatan för en annons.</p>

<p>denna route sparar även en bild i /public/user_bilder om användaren har laddat upp en sådan.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>rubrik,</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Rubriken på annonsen</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pris,</span>
      
      
        <span class='type'>(<tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>prist på varan som säljs</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>annonstext,</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>beskrivande text under annonsen</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kattegori,</span>
      
      
        <span class='type'>(<tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Nummret (id) på den kattegori som varan tillhör.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>user_id,</span>
      
      
        <span class='type'>(<tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id’t på användaren som äger annonsen.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#update_annonser-instance_method" title="Funktioner#update_annonser (method)">Funktioner#update_annonser</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 219</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/annonser/:id/update</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_rubrik'>rubrik</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:titel</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_pris'>pris</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:pris</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_annonstext'>annonstext</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:text</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_kattegori'>kattegori</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:kattegori</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:anv_id</span><span class='rbracket'>]</span>

    <span class='kw'>if</span>  <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:bilden</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_bild_filnamn'>bild_filnamn</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:bilden</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:filename</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_bild_fil'>bild_fil</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:bilden</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:tempfile</span><span class='rbracket'>]</span>
        
        <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./public/user_bilder/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bild_filnamn'>bild_filnamn</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wb</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
            <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_bild_fil'>bild_fil</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span>

    <span class='comment'>#p db.execute(&quot;SELECT DISTINCT User_owner_id FROM Annonser WHERE id = ?&quot;, id).first[&quot;user_owner_id&quot;]
</span>
    <span class='id identifier rubyid_update_annonser'><span class='object_link'><a href="Funktioner.html#update_annonser-instance_method" title="Funktioner#update_annonser (method)">update_annonser</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_rubrik'>rubrik</span><span class='comma'>,</span> <span class='id identifier rubyid_pris'>pris</span><span class='comma'>,</span> <span class='id identifier rubyid_annonstext'>annonstext</span><span class='comma'>,</span> <span class='id identifier rubyid_kattegori'>kattegori</span><span class='comma'>,</span> <span class='id identifier rubyid_bild_filnamn'>bild_filnamn</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
    
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/mina_annonser/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
   

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__anvandare-instance_method">
  
    #<strong>POST /anvandare</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sparar en ny användare i databasen  Kontrollerar om det valda användarnamnet är upptaget, om så är fallet skickas ett felmeddelande. sparar den nya användaren och redirectar sedan till login där användaren kan logga in på sitt nya konto. before routen för denna route validerar lösenordet och e-postadressen.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>user_name,</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>användarnamn</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tel_nr,</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>e-postadress</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password,</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>användarens påhittade lösenorde</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#create_new_crypt_password-instance_method" title="Funktioner#create_new_crypt_password (method)">Funktioner#create_new_crypt_password</a></span></li>
    
      <li><span class='object_link'><a href="Funktioner.html#saved_by_user_or_not-instance_method" title="Funktioner#saved_by_user_or_not (method)">Funktioner#saved_by_user_or_not</a></span></li>
    
      <li><span class='object_link'><a href="Funktioner.html#savetodb_anvandare-instance_method" title="Funktioner#savetodb_anvandare (method)">Funktioner#savetodb_anvandare</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 392</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/anvandare</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>

   

    <span class='comment'>#validera input med funktion
</span>


    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span>

    <span class='id identifier rubyid_user_name'>user_name</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:user_name</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_tel_nr'>tel_nr</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:tel_nr</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span>

    <span class='id identifier rubyid_password_krypterat'>password_krypterat</span> <span class='op'>=</span> <span class='id identifier rubyid_create_new_crypt_password'><span class='object_link'><a href="Funktioner.html#create_new_crypt_password-instance_method" title="Funktioner#create_new_crypt_password (method)">create_new_crypt_password</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span>

    <span class='comment'>#p db.execute(&quot;SELECT anv_namn from Anvandare WHERE id = ? AND anv_namn = ?&quot;, i, user_name)[&quot;anv_namn&quot;]
</span>

    <span class='comment'>#p db.execute(&quot;SELECT COUNT (id) FROM Anvandare WHERE anv_namn = ?&quot;, user_name).first[&quot;COUNT (id)&quot;].to_i
</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_saved_by_user_or_not'><span class='object_link'><a href="Funktioner.html#saved_by_user_or_not-instance_method" title="Funktioner#saved_by_user_or_not (method)">saved_by_user_or_not</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_name'>user_name</span><span class='rparen'>)</span>
        
        <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_savetodb_anvandare'><span class='object_link'><a href="Funktioner.html#savetodb_anvandare-instance_method" title="Funktioner#savetodb_anvandare (method)">savetodb_anvandare</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_name'>user_name</span><span class='comma'>,</span> <span class='id identifier rubyid_tel_nr'>tel_nr</span><span class='comma'>,</span> <span class='id identifier rubyid_password_krypterat'>password_krypterat</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:notice</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ditt konto har skapats, nu kan du logga in.</span><span class='tstring_end'>&quot;</span></span>

        <span class='id identifier rubyid_redirect'>redirect</span> <span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/anvandare/login/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

    <span class='kw'>else</span>

        <span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:notice</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Användarnamnet </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_name'>user_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> är redan upptaget, prova med något annat anv_namn</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='id identifier rubyid_back'>back</span>

        <span class='comment'>#det där användarnamnet är redan upptaget, välj något annat. 
</span>
    <span class='kw'>end</span>
            

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__anvandare__id_delete-instance_method">
  
    #<strong>POST /anvandare/:id/delete</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>tar bort en användare ifrån databasen tar även bort sesson med sesion.destroy</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id,</span>
      
      
        <span class='type'>(<tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id för anvädaren som ska tas bort</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#anv_delete-instance_method" title="Funktioner#anv_delete (method)">Funktioner#anv_delete</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


309
310
311
312
313
314
315
316
317
318
319</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 309</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/anvandare/:id/delete</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> 
    <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_anv_delete'><span class='object_link'><a href="Funktioner.html#anv_delete-instance_method" title="Funktioner#anv_delete (method)">anv_delete</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_session'>session</span><span class='period'>.</span><span class='id identifier rubyid_destroy'>destroy</span>

    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/anvandare/login/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__anvandare__id_update-instance_method">
  
    #<strong>POST /anvandare/:id/update</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>redigerar användarens upgifter. ändrar användarnman, e-postadress, och lösenord för en användare i databasen.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>user_name,</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>användarnamn</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tel_nr,</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>e-postadress</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password,</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>första nya lösenordet</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password2,</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>andra (bekräftelsen) av nya lösenordet</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>gamla_password,</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>det gamla lösenordet (krävs för att ändra till ett nytt lösenord.)</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#create_new_crypt_password-instance_method" title="Funktioner#create_new_crypt_password (method)">Funktioner#create_new_crypt_password</a></span></li>
    
      <li><span class='object_link'><a href="Funktioner.html#update_user_data-instance_method" title="Funktioner#update_user_data (method)">Funktioner#update_user_data</a></span></li>
    
      <li><span class='object_link'><a href="Funktioner.html#update_user_psw-instance_method" title="Funktioner#update_user_psw (method)">Funktioner#update_user_psw</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 258</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/anvandare/:id/update</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>


    <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:anv_id</span><span class='rbracket'>]</span>
        
    <span class='id identifier rubyid_user_name'>user_name</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:user_name</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_tel_nr'>tel_nr</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:tel_nr</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_password2'>password2</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password2</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_gamla_password'>gamla_password</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:gamla_password</span><span class='rbracket'>]</span>


    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_psw_krypterad'>psw_krypterad</span> <span class='op'>=</span> <span class='id identifier rubyid_select_psw'><span class='object_link'><a href="Funktioner.html#select_psw-instance_method" title="Funktioner#select_psw (method)">select_psw</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
    
    <span class='comment'>#p create_new_crypt_password(psw_krypterad)
</span>    <span class='comment'>#p gamla_password
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_password'>password</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> 

        <span class='id identifier rubyid_update_user_data'><span class='object_link'><a href="Funktioner.html#update_user_data-instance_method" title="Funktioner#update_user_data (method)">update_user_data</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_name'>user_name</span><span class='comma'>,</span> <span class='id identifier rubyid_tel_nr'>tel_nr</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>

    <span class='kw'>elsif</span> <span class='id identifier rubyid_password'>password</span> <span class='op'>==</span> <span class='id identifier rubyid_password2'>password2</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_psw_check'><span class='object_link'><a href="Funktioner.html#psw_check-instance_method" title="Funktioner#psw_check (method)">psw_check</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_gamla_password'>gamla_password</span><span class='comma'>,</span> <span class='id identifier rubyid_psw_krypterad'>psw_krypterad</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_password_krypterat'>password_krypterat</span> <span class='op'>=</span> <span class='id identifier rubyid_create_new_crypt_password'><span class='object_link'><a href="Funktioner.html#create_new_crypt_password-instance_method" title="Funktioner#create_new_crypt_password (method)">create_new_crypt_password</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_update_user_psw'><span class='object_link'><a href="Funktioner.html#update_user_psw-instance_method" title="Funktioner#update_user_psw (method)">update_user_psw</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_name'>user_name</span><span class='comma'>,</span> <span class='id identifier rubyid_tel_nr'>tel_nr</span><span class='comma'>,</span> <span class='id identifier rubyid_password_krypterat'>password_krypterat</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span> 
        


    <span class='kw'>else</span> 


        <span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:notice</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Du angav fel lösenord.</span><span class='tstring_end'>&quot;</span></span>



    <span class='kw'>end</span>

    <span class='id identifier rubyid_redirect'>redirect</span> <span class='id identifier rubyid_back'>back</span>


<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__anvandare_login-instance_method">
  
    #<strong>POST /anvandare/login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Kontrollerar om inloggningsuppgifterna stämmer med de sparade uppgifterna i databasen. ansätter även <a href=":inlogg_tid">session</a> tinn nuvarande tid, med syfte att möjliggöra cooldown.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>user_name,</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>användarnamnet som angavs i inlogg-formuläret.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password,</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>lösenordet som angavs i inlogg-formuläret.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Funktioner.html#select_user_login-instance_method" title="Funktioner#select_user_login (method)">Funktioner#select_user_login</a></span></li>
    
      <li><span class='object_link'><a href="Funktioner.html#check_psw-instance_method" title="Funktioner#check_psw (method)">Funktioner#check_psw</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 491</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/anvandare/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
        
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:inlogg_tid</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@user_name</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:user_name</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_anropa_db'><span class='object_link'><a href="Funktioner.html#anropa_db-instance_method" title="Funktioner#anropa_db (method)">anropa_db</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_select_user_login'><span class='object_link'><a href="Funktioner.html#select_user_login-instance_method" title="Funktioner#select_user_login (method)">select_user_login</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='ivar'>@result</span> <span class='op'>!=</span> <span class='kw'>nil</span>
        
        <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='ivar'>@result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
        <span class='comment'>#p id
</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_check_psw'><span class='object_link'><a href="Funktioner.html#check_psw-instance_method" title="Funktioner#check_psw (method)">check_psw</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span>
    
            <span class='comment'>#p &quot;användarid: #{session[:anv_id]}&quot;
</span>            <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:anv_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_id'>id</span>
            <span class='id identifier rubyid_redirect'>redirect</span> <span class='id identifier rubyid_back'>back</span>
        <span class='kw'>else</span>
    
            <span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:notice</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Jag tror du angav fel lösenord.</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_redirect'>redirect</span> <span class='id identifier rubyid_back'>back</span>
            
        <span class='kw'>end</span>

    <span class='kw'>else</span>
        
        <span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:notice</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Jag tror du angav fel användarnamn.</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='id identifier rubyid_back'>back</span>

    <span class='kw'>end</span> 
    
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue May  9 17:10:20 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-3.1.2).
</div>

    </div>
  </body>
</html>